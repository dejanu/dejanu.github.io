<!doctype html>
<html lang="en">
<head>
<!-- Required meta tags for responsive -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Footer resources -->
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css"> -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
<link rel="stylesheet" href="media/assets/css/style.css">

<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

<title>OS calculator</title>
</head>

<hr>
<div style="display: flex; justify-content: center;">
  <form method="post" onsubmit="readNodesNo(); return false;">
      <input type="text" name="data_ingest" placeholder="Enter value i.e. 50GB">
      <input type="text" name="retention_period" placeholder="Enter value i.e. 30 days">
      <input type="submit" value="Calculate">
  </form>
</div>

<div style="display: flex; justify-content: center;">
  <p><div id="shards">Total no of shards:</div></p>
</div>

<hr>
<br>

<!-- create a js function that reads the node_no and write is in the page-->
<script>
  function readNodesNo() {
      var nodes_no = document.getElementsByName("data_ingest")[0].value;
      var retention_period = document.getElementsByName("retention_period")[0].value;

      // verify if values from form can be converted to int
      var nodes_no_int = parseInt(nodes_no,10)
      var retention_period_int = parseInt(retention_period,10)

      if (Number.isInteger(nodes_no_int) && Number.isInteger(retention_period_int)) {
          
        // need to return the following formula: total_shards_per_cluster = (data_ingest * retention_period)/shard_size * (1 + replica_factor)
        shard_size = 20; // GB
        replica_factor = 1;
        total_shards_per_cluster = (nodes_no_int * retention_period_int)/shard_size * (1 + replica_factor);
        document.getElementById("shards").innerHTML = "Total shards per cluster: " + total_shards_per_cluster;
      } else {
          document.getElementById("shards").innerHTML = "Please enter a valid integer value";
      }
  }
  
</script>
</body>
</html>